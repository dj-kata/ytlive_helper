<!doctype html>
<html>
    <head>
        <meta charset="utf-8">
        <link href="https://fonts.googleapis.com/earlyaccess/nicomoji.css" rel="stylesheet">
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Potta+One&display=swap" rel="stylesheet">
        <title>hoge</title>
        <style>
            body { 
                background-color: rgba(0, 0, 0, 0);
                margin: 0px;
                padding: 0px;
                overflow: hidden;
                color:#0020AA;   
                font-size: 24px;
                color: #eeeeee;
                text-shadow: 2px 2px 0 #000,
                             -2px 2px 0 #000,
                             2px -2px 0 #000,
                             -2px -2px 0 #000;
                font-family:"LINE Seed JP App_TTF ExtraBold";
            }
            table#todo {
                font-size: 30px;
            	width:100%;
            }
            table#todo td:nth-child(1){
                padding-left:3%;
                width:10%;
            }
            table#todo td {
            	white-space:nowrap;
            }

        </style>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script>
        function loadXml() {
            var getxml = $.ajax({
                url: '../todo.xml',
                type: 'GET',
                dataType: 'xml',
                cache: false
            });
            getxml.done(function(xml){
                // xmlデータからほしいデータをfindで探し処理
                var out = "";
                $('#todo tbody').html("");
                $(xml).find("TODOs item").each(function(index, item){
                    var idx=Number($(item).find('idx').text());
                    var title=$(item).find('title').text();
                    var author=$(item).find('name').text();
                    var platform=$(item).find('platform').text();
                    if (platform == "manual"){
                        author="";
                        platform="";
                    }else{
                        title += " ("+ author +"さん)"
                    }
                    if (idx < 6){
                        out +='<tr><td><font color="#aaffaa">'+idx+'</font></td><td><font color="#ffffff">'+title+'</font></td></tr>';
                    }
                $('#todo tbody').html(out);
            });
            getxml.fail(function(err) {
                $(songtitle).text("ERROR!!!"+err);
                //alert('failed');
            });
        });
        }

        window.addEventListener('DOMContentLoaded', function() {
            var roopTimer = setInterval(loadXml, 500);
        });

</script>
</head>
<body>
    <table id="todo">
        <tbody></tbody>
    </table>
</body>
</html>